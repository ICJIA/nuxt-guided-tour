# useTour()

The core composable that manages all tour state and navigation.

## Usage

```typescript
import type { TourConfig } from 'nuxt-guided-tour/dist/runtime/types'

const tourConfig: TourConfig = {
  version: 1,
  autoStart: true,
  autoStartDelay: 800,
  storageKeyPrefix: 'my-app-tour',
  steps: [/* ... */]
}

const tour = useTour(tourConfig)
```

## Return Value

### State Properties

| Property | Type | Description |
|----------|------|-------------|
| `steps` | `TourStep[]` | All tour steps from config. |
| `version` | `number` | Tour version. |
| `autoStart` | `boolean` | Whether auto-start is enabled. |
| `autoStartDelay` | `number` | Auto-start delay in ms. |
| `currentStepIndex` | `Ref<number>` | Current step index (-1 when inactive). |
| `currentStep` | `ComputedRef<TourStep \| null>` | Current step data. |
| `isActive` | `ComputedRef<boolean>` | Whether the tour is running. |
| `hasCompletedTour` | `Ref<boolean>` | Whether user has completed the tour (persisted in localStorage). |
| `progress` | `ComputedRef<TourProgress>` | Progress info: `{ current, total, percentage }`. |

### Navigation Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `start()` | `() => void` | Start the tour from the beginning. |
| `next()` | `() => void` | Go to next step or complete if on last step. |
| `previous()` | `() => void` | Go to previous step. |
| `cancel()` | `() => void` | Cancel tour and mark as seen. |
| `complete()` | `() => void` | Complete tour and mark as finished. |
| `goToStep()` | `(index: number) => void` | Jump to a specific step by index. |

### Utility Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `getStepById()` | `(id: string) => TourStep \| undefined` | Get a step by its ID. |
| `getStepIndex()` | `(id: string) => number` | Get the index of a step by ID. |
| `handleKeydown()` | `(event: KeyboardEvent) => void` | Keyboard event handler. |
| `markAsSeen()` | `() => void` | Mark tour as completed in localStorage. |
| `resetCompletion()` | `() => void` | Reset so tour will auto-start again. |

## Keyboard Handling

The overlay component handles keyboard events internally. The `handleKeydown` method is also exported if you need custom keyboard behavior:

- **Escape** — Cancel tour
- **ArrowRight** — Next step
- **ArrowLeft** — Previous step

## Highlight Behavior

When a step activates, `useTour` sets `data-tour-active="true"` on the target element. For elements with `overflow: hidden`, it also sets `data-tour-overflow="true"` so the CSS uses `outline` instead of `::before` (since pseudo-elements are clipped by overflow).

## Development Mode

In dev mode, `useTour` validates that all step targets exist in the DOM 1 second after mount and logs warnings for missing targets.
